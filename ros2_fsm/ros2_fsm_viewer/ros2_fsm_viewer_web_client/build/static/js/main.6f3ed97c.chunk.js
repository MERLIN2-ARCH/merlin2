(this.webpackJsonpros2_fsm_viewer_web_client=this.webpackJsonpros2_fsm_viewer_web_client||[]).push([[0],{192:function(e,t,n){},193:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a=n(9),s=n(0),r=n.n(s),i=n(11),l=n.n(i),c=(n(192),n(193),n(109)),o=n(76),h=n(77),u=n(83),m=n(82),f=n(428),g=n(430),d=n(108),p=n.n(d),_=(n(202),n(172)),b=n.n(_),j=n(107),v=n.n(j),x=(n(379),n(431)),y=n(425),O=n(422),w=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"prepare_graph",value:function(e){var t=[],n=[],a=[],s=[],r=[],i=[],l=e.fsm_structure,c=Array.from(l.states);a.push(e.fsm_name),r.push(c.length),i.push(e.current_state);var o=[],h=l.final_outcomes;for(var u in h){var m=h[u];o.push(m),t.push({data:{id:a[a.length-1]+m,label:m,type:"outcome",width:12*m.length,height:12*m.length/2}})}for(s.push(o);c.length>0;){var f=c.pop(),g="",d="node",p=30,_=60;for(var u in e.fsm_name!=a[a.length-1]&&(g=a[a.length-1]),e.current_state==f.state_name&&(d="current_state",f.is_fsm&&(d="current_fsm")),i[i.length-1]!=f.state_name||f.is_fsm||(d="current_state"),console.log(e.current_state==f.state_name),p<6*f.state_name.length&&(p=6*f.state_name.length),_<12*f.state_name.length&&(_=12*f.state_name.length),t.push({data:{id:a[a.length-1]+f.state_name,parent:g,label:f.state_name,type:d,width:_,height:p}}),r[r.length-1]-=1,f.outcomes){m=f.outcomes[u];var b=a[a.length-1]+f.state_name;f.is_fsm&&(b=a[a.length-1]+f.state_name+m),f.transitions.hasOwnProperty(m)?n.push({data:{id:a[a.length-1]+f.state_name+m+f.transitions[m],source:b,target:a[a.length-1]+f.transitions[m],label:m}}):s[s.length-1].includes(m)&&n.push({data:{id:a[a.length-1]+f.state_name+m+m,source:b,target:a[a.length-1]+m,label:m}})}if(f.is_fsm){for(var u in o=[],f.outcomes){m=f.outcomes[u];o.push(m),f.is_fsm&&t.push({data:{id:a[a.length-1]+f.state_name+m,label:m,type:"outcome",parent:a[a.length-1]+f.state_name,width:12*m.length,height:12*m.length/2}})}for(var u in a.push(a[a.length-1]+f.state_name),s.push(o),r.push(f.states.length),i.push(f.current_state),f.states)c.push(f.states[u])}for(;0==r[r.length-1];)r.pop(),a.pop(),s.pop(),i.pop()}return[t,n]}},{key:"render",value:function(){var e,t;v.a.use(b.a);var n=this.prepare_graph(this.props.fsm_data);return e=n[0],t=n[1],Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsxs)(O.a,{container:!0,spacing:1,children:[Object(a.jsx)(O.a,{item:!0,xs:12,children:Object(a.jsx)(y.a,{variant:"h4",component:"h4",gutterBottom:!0,align:"center",children:this.props.fsm_data.fsm_name})}),Object(a.jsx)(O.a,{item:!0,xs:12,children:Object(a.jsx)(x.a,{display:"flex",border:1,justifyContent:"center",style:{width:"100%",height:"100%"},children:Object(a.jsx)(p.a,{elements:p.a.normalizeElements({nodes:e,edges:t}),stylesheet:[{selector:"node",style:{label:"data(label)",borderColor:"black",borderWidth:2,textValign:"center",textHalign:"center",width:"data(width)",height:"data(height)"}},{selector:"node[type = 'fsm']",style:{textValign:"top",textHalign:"center"}},{selector:"node[type = 'outcome']",style:{backgroundColor:"red"}},{selector:"node[type = 'current_state']",style:{backgroundColor:"green"}},{selector:"node[type = 'current_fsm']",style:{borderColor:"blue",textValign:"top",textHalign:"center"}},{selector:"edge",style:{label:"data(label)",targetArrowShape:"triangle",curveStyle:"bezier"}}],layout:{name:"klay",klay:{spacing:100}},style:{width:"100%",height:"500px"},zoomingEnabled:!0,boxSelectionEnabled:!1,autoungrabify:!0,panningEnabled:!0,userZoomingEnabled:!1,userPanningEnabled:!1})})})]})})}}]),n}(r.a.Component),L=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={fsm_list:[],current_fsm:{fsm_name:"ALL"}},a}return Object(h.a)(n,[{key:"get_fsms",value:function(){var e=this;fetch("/get_fsms").then((function(e){return e.json()})).then((function(t){var n=[{fsm_name:"ALL"}];for(var a in t){var s=t[a];n.push(s)}e.setState({fsm_list:n})}))}},{key:"get_fsm",value:function(){var e=this;fetch("/get_fsm/"+this.state.current_fsm.fsm_name).then((function(e){return e.json()})).then((function(t){e.setState({current_fsm:t})}))}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){"ALL"===e.state.current_fsm.fsm_name?e.get_fsms():e.get_fsm()}),250)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsxs)(O.a,{container:!0,spacing:3,children:[Object(a.jsx)(O.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(g.a,{id:"combo-box",disableClearable:"true",options:this.state.fsm_list,getOptionLabel:function(e){return e.fsm_name},getOptionSelected:function(e,t){return e.fsm_name===t.fsm_name},defaultValue:{fsm_name:"ALL"},onChange:function(t,n){e.setState({current_fsm:n})},style:{width:300},renderInput:function(e){return Object(a.jsx)(f.a,Object(c.a)(Object(c.a)({},e),{},{label:"FSM",variant:"outlined"}))}})})}),"ALL"===this.state.current_fsm.fsm_name?this.state.fsm_list.map((function(e){if("ALL"!==e.fsm_name)return Object(a.jsx)(O.a,{item:!0,xs:6,children:Object(a.jsx)(w,{fsm_data:e})},e.fsm_name)})):Object(a.jsx)(O.a,{item:!0,xs:12,children:Object(a.jsx)(w,{fsm_data:this.state.current_fsm})})]})})}}]),n}(r.a.Component);var C=function(){return Object(a.jsx)(s.Fragment,{children:Object(a.jsx)("div",{style:{marginTop:"20px",marginLeft:"20px",marginRight:"20px",marginBottom:"20px"},children:Object(a.jsx)(L,{})})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,434)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};l.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),k()}},[[388,1,2]]]);
//# sourceMappingURL=main.6f3ed97c.chunk.js.map